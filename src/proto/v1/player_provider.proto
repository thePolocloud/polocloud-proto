syntax = "proto3";

package dev.httpmarco.polocloud.v1.proto;

import "google/protobuf/empty.proto";
import "google/protobuf/any.proto";

option java_package = "dev.httpmarco.polocloud.v1.player";
option java_multiple_files = true;

service PlayerController {
  rpc findAll (google.protobuf.Empty) returns (PlayerFindResponse);
  rpc findByName (PlayerFindByNameRequest) returns (PlayerFindResponse);
  rpc findByUniqueID (PlayerFindByUniqueIdRequest) returns (PlayerFindResponse);
  rpc findByService (PlayerFindByServiceRequest) returns (PlayerFindResponse);
  rpc playerCount(google.protobuf.Empty) returns (PlayerCountResponse);
  rpc messagePlayer(PlayerMessageActorRequest) returns (PlayerActorResponse);
  rpc kickPlayer(PlayerKickActorRequest) returns (PlayerActorResponse);
  rpc connectPlayer(PlayerConnectActorRequest) returns (PlayerActorResponse);
  rpc actorStreaming (PlayerActorIdentifier) returns (stream StreamingAlert);
}

message PlayerFindByNameRequest {
  string name = 1;
}

message PlayerFindByUniqueIdRequest {
  string uniqueId = 1;
}

message PlayerFindByServiceRequest {
  string current_service_name = 1;
}

message PlayerSnapshot {
  string unique_id = 1;
  string name = 2;
  string current_server_name = 3;
  string current_proxy_name = 4;
  int64 first_time_joined = 5;
}

message PlayerFindResponse {
  repeated PlayerSnapshot players = 1;
}

message PlayerCountResponse {
  int32 count = 1;
}

message PlayerMessageActorRequest {
  string unique_id = 1;
  string message = 2;
}

message PlayerKickActorRequest {
  string unique_id = 1;
  string reason = 2;
}

message PlayerConnectActorRequest {
  string unique_id = 1;
  string target_service_name = 2;
}

message PlayerActorIdentifier {
  string service_name = 1;
}

message PlayerActorResponse {
  bool success = 1;
  string error_message = 2;
}

message StreamingAlert {
  string className = 1;
  google.protobuf.Any actor = 2;
}

